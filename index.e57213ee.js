var e;const t="name",n="position",a="office",r="salary",l="desc",o="input",c="select",u="text",d="number",i=["Tokyo","Singapure","London","New York","Edinburgh","San Francisco"],s="Error",m="Success",p={MIN_TEXT_LENGTH:e=>`${e} must be at least 4 characters long`,MAX_TEXT_LENGTH:e=>`${e} must be less than 30 characters long`,INVALID_NUMBER:e=>`${e} must be a positive number without any other characters`,INVALID_AGE:e=>`${e} must be between 18 and 90`},f=[{tag:o,nameValue:t,type:u,required:!0},{tag:o,nameValue:n,type:u,required:!0},{tag:c,nameValue:a,required:!0,options:i},{tag:o,nameValue:"age",type:d,required:!0},{tag:o,nameValue:r,type:d,required:!0}];function C(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(+e)}function y(e,t,n){let a=document.createElement("div"),r=function(e){let t=document.createElement("h3");return t.textContent=e,t.className="title",t}(e),l=function(e){let t=document.createElement("p");return t.textContent=e,t}(t);a.dataset.qa="notification",a.classList.add("notification",n?"success":"error"),a.appendChild(r),a.appendChild(l),document.body.appendChild(a),setTimeout(()=>{document.body.removeChild(a)},3e3)}function E(e){return`${e[0].toUpperCase()}${e.slice(1)}`}function h(e){let t=e.value.replace(/\s+/g," ").trim();return t.length<4?p.MIN_TEXT_LENGTH(E(e.name)):t.length>30?p.MAX_TEXT_LENGTH(E(e.name)):null}function b(e){let t=+e.value;return/^\d+$/.test(e.value)?"age"===e.name&&(t<18||t>90)?p.INVALID_AGE(E(e.name)):void 0:p.INVALID_NUMBER(E(e.name))}function v(e,t,n="text"){let a=e.textContent,l=document.createElement("input"),o="text"===n?h:b;t===r?l.value=a.replace(/[$,]/g,""):l.value=a,l.name=t,l.classList.add("cell-input"),l.type=n,e.textContent="",e.appendChild(l),l.focus(),l.onblur=()=>{if(""===l.value){e.textContent=a;return}let n=o(l);if(n){y(s,n,!1),l.focus();return}t===r?e.textContent=C(l.value):e.textContent=l.value,y(m,"Cell updated",!0)},l.addEventListener("keydown",n=>{if("Enter"===n.key){if(""===l.value){e.textContent=a;return}let n=o(l);n?(y(s,n,!1),e.textContent=a):(t===r?e.textContent=C(l.value):e.textContent=l.value,y(m,"Cell updated",!0))}})}const x="active";let g=null,q=null,L=null,N=null;const S=document.querySelector("table");!function(e){let o=e.querySelector("thead"),c=e.querySelector("tbody");o.addEventListener("click",e=>{var u,d;let i=e.target.closest("th");if(!i)return;L!==i?(L=i,N="asc"):N="asc"===N?l:"asc";let s=i.textContent.toLowerCase(),m=Array.from(o.querySelectorAll("th")).findIndex(e=>e.textContent.toLowerCase()===s);(u=Array.from(c.querySelectorAll("tr")),d=N,u.sort((e,o)=>{let c=e.children[m].textContent,u=o.children[m].textContent,i=0;switch(s){case t:case n:case a:i=c.localeCompare(u);break;case"age":i=+c-+u;break;case r:i=+c.replace(/[^0-9.-]+/g,"")-+u.replace(/[^0-9.-]+/g,"");break;default:i=0}return d===l&&(i=-i),i})).forEach(e=>{c.append(e)})})}(S),function(e){e.querySelector("tbody").addEventListener("click",e=>{let t=e.target.closest("tr");t&&t!==g&&(q&&q.classList.remove(x),(g=t).className=x,q=g)})}(S),(e=function(){let e=document.createElement("form");for(let t of(e.className="new-employee-form",f)){let n=function(e){let{nameValue:t,tag:n,type:a,required:r,options:l}=e,o=document.createElement("label"),u=document.createElement(n);return o.textContent=`${t[0].toUpperCase()}${t.slice(1)}: `,u.name=t,u.required=r,u.dataset.qa=t,o.appendChild(u),n===c?l.forEach((e,t)=>{let n=document.createElement("option");0===t&&(n.selected=!0),n.value=e,n.textContent=e,u.append(n)}):u.type=a,o}(t);e.appendChild(n)}let t=function(){let e=document.createElement("button");return e.type="submit",e.textContent="Save to table",e}();return e.appendChild(t),document.body.insertBefore(e,document.querySelector("script")),e}()).onsubmit=t=>{for(let n of(t.preventDefault(),e.elements)){let e;if("submit"!==n.type){switch(n.type){case"text":e=h(n);break;case"number":e=b(n)}if(e){y(s,e,!1);return}}}(function(e){let t=document.querySelector("tbody"),n=function(e){let t=document.createElement("tr");for(let n of f){let a=n.nameValue,r=document.createElement("td");"salary"===a?r.textContent=C(e[a].value):r.textContent=e[a].value,t.appendChild(r)}return t}(e);t.appendChild(n)})(e.elements),y(m,"Employee added successfully",!0),e.reset()},function(e){let l=e.querySelector("tbody"),o=e.querySelector("thead tr");l.addEventListener("dblclick",e=>{let l=e.target.closest("td");if(!l||l.querySelector("input, select"))return;let c=[...l.parentNode.children].findIndex(e=>e===l),u=o.children[c].textContent.toLowerCase();switch(u){case t:case n:v(l,u);break;case a:!function(e){let t=document.createElement("select"),n=e.textContent;i.forEach(e=>{let a=document.createElement("option");a.value=e,a.textContent=e,n===e&&(a.selected=!0),t.appendChild(a)}),e.textContent="",e.appendChild(t),t.focus(),t.onblur=()=>{e.textContent=t.value,y(m,"Cell updated",!0)},t.addEventListener("keydown",n=>{"Enter"===n.key&&(e.textContent=t.value,y(m,"Cell updated",!0))})}(l);break;case"age":case r:v(l,u,d)}})}(S);
//# sourceMappingURL=index.e57213ee.js.map
